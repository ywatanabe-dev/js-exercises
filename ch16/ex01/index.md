### マルチスレッドについて

アプリケーションのプロセスの中で、さらに複数のスレッドに分けて並行処理を行うことをマルチスレッドと呼ぶ[1]。
マルチスレッドで処理を行うことでパフォーマンスは改善するが、データ・リソースに対するアクセス競合、デッドロックや、特定のスレッドの実行順でのみ起きる再現性の低いバグなど、プログラミングの複雑度も増す[2]。

[1]：https://www.ntt-west.co.jp/business/glossary/words-00262.html
[2]:https://doc.rust-jp.rs/book-ja/ch16-01-threads.html

### mFib.jsをスレッド数を変更しながら実行し、コンソール出力とOS機能で結果とスレッド数を確認

以下のxの数字を変化させながら結果を確認する。

```
node mFib.js 45 x
```

- x = 1 実行時間：11.857s スレッド数：12
- x = 5 実行時間：5.069s スレッド数：16
- x = 6 実行時間：4.888s スレッド数：17
- x = 7 実行時間：5.005s スレッド数：18
- x = 8 実行時間：4.724s スレッド数：19
- x = 9 実行時間：4.694s スレッド数：20
- x = 10 実行時間：4.882s スレッド数：21
- x = 11 実行時間：4.680s スレッド数：22
- x = 12 実行時間：4.639s スレッド数：23
- x = 13 実行時間：4.632s スレッド数：24
- x = 14 実行時間：4.630s スレッド数：25
- x = 15 実行時間：4.643s スレッド数：26
- x = 16 実行時間：4.646s スレッド数：27

### 使用しているPCのCPUスペックと、適切なスレッド数について

上記の実験で使用したマシンは物理コア数・論理コア数ともに12である。

```
$ sysctl -n hw.physicalcpu_max
12
$ sysctl -n hw.logicalcpu_max
12
```

上記の結果を見ると、 x = 12辺りから実行時間がほとんど変わらなくなる。この理由として、ワーカーの数が12の場合、ワーカーの持つスレッド(の処理)がそれぞれのCPUコアにちょうど割り当てられ、効率よく計算ができる形となるためだと考えられる。
